{% extends "base.html" %}

{% block content %}
  <h1 style="text-align: center">Test Blog</h1>

  {% if post_list %}
    <ul class="post-list">
      {% for post in post_list %}
      <li class="post-item">
        <h3><a href="{% url 'blog:post-detail' pk=post.id %}">{{ post.title }}</a></h3>
        <h5 class="post-owner">{{ post.owner.username }}</h5>
        <p class="posting-time">{{ post.created_time }}</p>
        <p class="post-content">{{ post.content }}</p>
        {% if post.commentary_set.all %}
          <br>
          {{ post.commentary_set.count }} comment{{ post.commentary_set.count|pluralize }}:
          <ul class="comment-list">
            {% for comment in post.commentary_set.all %}
              <li>
                <div class="comment-item">
                   <p style="display: inline;">
                     <span class="comment-username">{{ comment.user.username }}</span>
                     <span class="posting-time"> at {{ comment.created_time }}</span>
                     <br>
                     {{ comment.content }}
                   </p>
                </div>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <br>
          No comments left to this post.
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock %}
