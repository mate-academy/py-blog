{% extends "base.html" %}

{% block content %}
  <h1>Blog Home Page</h1>
  <p>Hello, you come to the best blog!</p>
  <hr>
  <div class="row">
    <div class="col-md-10">
      <h2 class="my-4">
        Posts
        <a href="{% url 'blog:post-create' %}" class="btn btn-primary btn-lg active, add">Add post</a>
      </h2>
      <ul class="list-group">
        {% for post in object_list %}
          <li class="post-list, list-group-item">
            <a href="{% url "blog:post-detail" pk=post.id %}"><h4>{{ post.title }}:
              {% if post.owner.id == user.id %}
                <a href="{% url "blog:post-update" pk=post.id %}" class="btn btn-primary">Update post</a>
                <a href="{% url "blog:post-delete" pk=post.id %}" class="btn btn-danger">Delete post</a>
              {% endif %}
            </h4></a>
            <p><strong>Created: {{ post.created_time }} by {{ post.owner }}</strong></p>
            <p>{{ post.content|truncatechars:255 }}</p>
            <p><strong>Comments: {{ post.comments.count }}</strong></p>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
