{% extends "base.html" %}


{% block content %}


  <div class="card bg-light mb-3">
    <div class="card-body">
      <h1 class="card-title">{{ post.title }}</h1>
      <p class="text-secondary">
        <b>Written by {{ post.owner.first_name }} {{ post.owner.last_name }}</b>
        <br>
        {{ post.created_time|date:"D d M Y" }} {{ post.created_time|time:"H:i" }}
      </p>
      <p class="text-justify">{{ post.content }}</p>
    </div>
  </div>
  <p>{{ post.commentaries.count }} comment{{ post.commentaries.count|pluralize }}</p>

  {% if post.commentaries %}
    {% for commentary in post.commentaries.all %}

      <div class="card mb-3">
        <div class="card-header">
          <p class="text-success">
            {{ commentary.user.username }}
          </p>
          <p class="text-secondary time-text m-0 p-0">{{ commentary.created_time }}</p>
        </div>

        <div class="card-body">
          {{ commentary.content }}
        </div>
      </div>
    {% empty %}
      <p>Be the first to comment on this post!</p>
    {% endfor %}
  {% endif %}

  {% if request.user.is_authenticated %}
    <a href="{% url "blog:new-comment" pk=post.id %}">Write a comment!</a>
  {% else %}
    <p>You need to "login" in order to comment on this post.</p>
    <a href="{% url "login" %}">Login</a>
  {% endif %}

{% endblock %}
