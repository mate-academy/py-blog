{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <div class="post_list">
    <h3>Post: {{ post.title }}</h3>
    <hr>
    <p class="text-muted">Posted by {{ post.owner }} at {{ post.created_time }}</p>
    <p>{{ post.content }}</p>
    <p><small><strong>{{ post.commentaries.count }} comment{{ post.commentaries.count|pluralize }}</strong></small></p>
    <h5>Comments:</h5>
    <ul >
      {% for comment in post.commentaries.all %}
        <li>
          <p class="text-muted">{{ comment.user }} at {{ comment.created_time }}</p>
          <p>{{ comment.content }}</p>
        </li>
      {% empty %}
        <p>There are no comments yet.</p>
      {% endfor %}
    </ul>
    <hr>
    {% if user.is_authenticated %}
      <form action="" method="post">
        {% csrf_token %}
        <label for="content">
          <strong>Add a new comment</strong>
        </label>
        {{ comment_form|crispy }}
        <input class="btn btn-primary" type="submit" value="Add comment">
      </form>
    {% else %}
      <a href="{% url "login" %}">Login to add comment!</a>
    {% endif %}
  </div>
{% endblock %}
