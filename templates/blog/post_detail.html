{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}

  <div class="card mt-4 shadow-lg">

    <!-- Заголовок поста -->
    <h1 class="mb-1 text-center card-header bg-info text-white">{{ post.title }}</h1>

    <!-- Власник та текст поста -->
    <div class="card-body">
      <h6 class="card-title">Created by <span class="text-primary">{{ post.owner.username }}</span></h6>
      <p class="card-text">{{ post.content }}</p>
      <small class="card-title d-flex justify-content-end text-muted">{{ post.created_time }}</small>
    </div>

    <!-- Коментарі -->
    <div class="card my-3">
      <ul class="list-group list-group-flush">
        {% for comment in post.commentaries.all %}
          <li class="list-group-item">
            <small class="text-primary">{{ comment.user.username }}</small>
            <p class="mb-1">{{ comment.content }}</p>
            <small class="d-flex justify-content-end text-muted">{{ comment.created_time }}</small>
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Форма для додавання коментаря -->
    {% if user.is_authenticated %}
      <form method="post" action="{% url 'blog:post-detail' pk=post.pk %}" class="mt-3">
        {% csrf_token %}
        {{ form|crispy }}
        <div class="d-flex justify-content-between">
          <input class="btn btn-success" type="submit" value="Submit">
          <a href="{% url 'blog:index' %}">
            <input class="btn btn-primary" type="button" value="Back">
          </a>
        </div>
      </form>
    {% else %}
      <div class="d-flex justify-content-center mt-3">
        <p>
          You must
          <a href="{% url 'login' %}?next={{ request.path }}" class="text-primary">log in</a>
          to add commentaries!
        </p>
      </div>
    {% endif %}

  </div>

{% endblock %}
