{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <div class="container">
    <h1>{{ post.title }}</h1>
    <hr>
    <h6>
      <i class="fa-regular fa-user"></i> {{ post.owner }},
      <i class="fa-regular fa-clock"></i> {{ post.created_time }}
    </h6>
    <p>{{ post.content }}</p>
    <br>
    <h3><i class="fa-regular fa-comment-dots"></i> Comments:</h3>
    <br>
    <div class="container">
      {% if post.commentaries.all %}
        {% for comments in post.commentaries.all %}
          <h6>
            <i class="fa-regular fa-user"></i> {{ comments.user.username }},
            <i class="fa-regular fa-clock"></i> {{ comments.created_time }}
          </h6>
          <p>{{ comments.content }}</p>
          <hr>
          <br>
        {% endfor %}
        {% else %}
        <h4>No commentaries</h4>
      {% endif %}
      <h4>Leave comment</h4>
      {% if user.is_authenticated %}
        {% if error %}
          <p style="font-weight: bold; color: red;">{{ error }}</p>
        {% endif %}
        <form action="" method="post" novalidate>
          {% csrf_token %}
          {{ comment_form|crispy }}

          <input class="btn btn-primary" type="submit" value="Add comment">
        </form>
        <br><br>
      {% else %}
        <p>Please <a href="{% url 'login' %}">Login</a> to write new comment.</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
