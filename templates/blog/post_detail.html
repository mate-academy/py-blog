{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}

  <div class="content">
    <h2>{{post.title}}</h2>
    <p>{{ post.owner }}<small><span  class="text-secondary"> at {{ post.created_time }}</span></small></p>
    <p class="text-main">{{post.content}}</p>
  </div>
  <hr>

  <h6>{{ post.comments.count }} comment{{ post.comments.count|pluralize }}</h6>
  {% for comment in post.comments.all %}
    <div class="comment">
      <p>{{ comment.user }} <small><span  class="text-secondary">({{ comment.created_time }})</span></small></p>
      <hr>
      <p>{{ comment.content }}</p>
    </div>
    <br>
  {% empty %}
    <p>There are no comments yet.</p>
  {% endfor %}

  <h6>Add your comment</h6>

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-danger" role="alert">
       <p>{{ message }}</p>
      </div>
    {% endfor %}
  {% endif %}

  <form action="" method="POST" novalidate>
    {% csrf_token %}
    {{ form|crispy }}
    <input class="btn btn-outline-primary" type="submit" value="Add comment">
  </form>
  <br>
{% endblock %}
