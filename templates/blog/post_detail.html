{% extends "base.html" %}
{% load static %}

{% block title %}
<title>{{ post.title }}</title>
{% endblock %}
{% block styles %}
 <link rel="stylesheet" href="{% static 'css/post_detail_styles.css' %}">
{% endblock %}

{% block content %}
<div class="post-detail-container">
    <article class="post-content-area">
        <h1 class="post-detail-title">{{ post.title }}</h1>
        <p class="post-detail-meta">
            By: <span class="author-name">{{ post.owner.username }}</span> |
            Published on: <span class="creation-date">{{ post.created_time|date:"F j, Y, P" }}</span>
        </p>
        <div class="post-detail-body">
            {{ post.content|linebreaksbr }} {# Renders newlines as <br> tags #}
        </div>
    </article>

    <section class="comments-section">
        <h2>Comments ({{ amount_of_comments }})</h2>

        {% if comments %}
            <div class="comments-list">
                {% for comment in comments %}
                    <div class="comment-item">
                        <p class="comment-author-date">
                            <strong>{{ comment.user.username }}</strong> on
                            <span class="comment-date">{{ comment.created_time|date:"F j, Y, P" }}</span>
                        </p>
                        <p class="comment-content">{{ comment.content|linebreaksbr }}</p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-comments-message">No comments yet. Be the first to comment!</p>
        {% endif %}

        <div class="comment-form-area">
            {% if user.is_authenticated %}
            <h3>Leave a Comment</h3>
                <form method="post" class="comment-form">
                    {% csrf_token %}
                    {{ comment_form.as_p }}
                    <button type="submit" class="submit-comment-btn">Post Comment</button>
                </form>
            {% endif %}
        </div>
    </section>
</div>
{% endblock %}