{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Post - {{ post.title }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</head>
<body>
  <div class="row mx-2">
    <div class="col-2"></div>
    <div class="col-8">
      <h1>{{ post.title }}</h1>
        <p class="text-muted">{{ post.owner.username }} at {{ post.created_time.month }}, {{ post.created_time.day }}, {{ post.created_time.year }}, {{ post.created_time.time }}</p>
        <p>{{ post.content }}</p>
      <div class="container-fluid">
        <p class="text-muted">Comments: {{ post.commentaries.count }}</p>
        {% for comment in post.commentaries.all %}
          <div class="border my-2">
            <div class="mx-2 my-2">
              <p class="text-muted">{{ comment.user.username }}
              at {{ comment.created_time.month }}, {{ comment.created_time.day }}, {{ comment.created_time.year }}, {{ comment.created_time.time }}
              </p>
              <p>{{ comment.content }}</p>
            </div>
          </div>
        {% endfor %}
        <div class="container-fluid py-4">
          <h2>Add Comment</h2>
          {% if user.is_authenticated %}
            <form method="post">
              {% csrf_token %}
              {{ comment_form|crispy }}
              <button type="submit">Add Comment</button>
            </form>
          {% else %}
            <p>You must be logged in to post a comment.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</body>
</html>