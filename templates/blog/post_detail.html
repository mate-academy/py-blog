{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block content %}
  <div class="card">
    <div class="card-body">
      <h1 class="card-title">{{ post.title }}</h1>
      <h6 class="card-subtitle text-muted">by {{ post.owner }} at {{ post.created_time }}</h6>
      <p class="card-text mt-3">{{ post.content }}</p>
      <a href="{% url 'blog:index' %}" class="btn btn-secondary">Back to Posts</a>
    </div>
  </div>

  <h3 class="mt-4">Comments</h3>
  {% if commentaries %}
    <ul class="list-group">
      {% for comment in commentaries %}
        <li class="list-group-item">
          <strong>{{ comment.user.username }}</strong> - <small class="text-muted">{{ comment.created_time }}</small>
          <p class="mb-0">{{ comment.content }}</p>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No comments yet. Be the first to comment!</p>
  {% endif %}
  {% if user.is_authenticated %}
    <h3 class="mt-4">Add a Comment</h3>
    <form action="" method="post" class="mt-3" novalidate>
      {% csrf_token %}
      {{ form|crispy }}
      <button type="submit" class="btn btn-primary">Add</button>
    </form>

  {% endif %}

{% endblock %}
