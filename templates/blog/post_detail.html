{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <div class="inline float-end">
    {% if user.is_authenticated %}
      {{ user.username }}
      <a href="{% url 'logout' %}">Logout</a>
    {% else %}
      <a href="{% url 'login' %}">Login</a>
    {% endif %}
  </div>
  <h1 class="mt-5 mb-3">{{ post.title }}</h1>
  <h3>Content:</h3>
  <div class="mb-3">{{ post.content }}</div>
  <div class="row justify-content-between mb-3">
    <div class="col col-sm-2 col-6 text-muted">Owner: {{ post.owner }}</div>
    <div class="col col-sm-2 col-6 text-muted">{{ post.created_time }}</div>
  </div>
  <div class="fw-bold mb-1">Comments:</div>
  {% for comment in post.commentaries.all %}
    <div class="card mb-2">
      <div class="p-2 text-black">
        {{ comment.content }}</div>
      <div class="p-2 row justify-content-between">
        <p class="col col-sm-2 col-6 text-muted m-0">{{ comment.user }}</p>
        <p class="col col-sm-2 col-6 text-muted m-0">{{ comment.created_time }}</p>
      </div>
    </div>
  {% empty %}
    <div>There are no comments yet</div>
  {% endfor %}
  <form action="" method="post" class="mt-3">
    {% csrf_token %}
    {{ commentary_form|crispy }}
    {% if error %}
      <div class="alert alert-danger mt-2">
        {{ error }}
      </div>
    {% endif %}
    <input class="btn btn-secondary mt-2" type="submit" value="Add">
  </form>
{% endblock %}