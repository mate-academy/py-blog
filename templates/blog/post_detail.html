{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block title %}
  <title>Blog {{ post.id }}</title>
{% endblock %}

{% block content %}
  <h1> {{ post.title }}</h1>
  <p> {{ post.content }}</p>
  <p>Created by: {{ post.owner }} at: {{ post.created_time }}</p>
  <br>
  <h4>Commentaries:</h4>
  {%  for comment in post.commentary.all %}
    <p> "{{ comment.content }}" || created by {{ comment.user }} at {{ comment.created_time }}</p>
  {% empty %}
    <p>There is no commentary </p>
  {% endfor %}
  <br>

  {% if user.is_authenticated %}
    <div>
      <h3>Leave a Comment:</h3>
      <form method="post" action="{% url "blog:comment-create" pk=post.id %}">
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" class="btn btn-primary">Add comment</button>
      </form>
    </div>
  {% else %}
    <p>You must be logged in to post a comment.</p>
  {% endif %}

{% endblock %}
