{% extends "blog/base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <article>
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>

        <p>
            <small>
                Owner: {{ post.owner }}
                |
                Created: {{ post.created_time|date:"Y-m-d H:i" }}
            </small>
        </p>
    </article>

    <section class="comments">
        <h3>Comments</h3>

        <ul>
            {% for comment in comments %}
                <li>
                    <p>{{ comment.content }}</p>
                    <p>
                        <small>
                            By {{ comment.user }}
                            at {{ comment.created_time|date:"Y-m-d H:i" }}
                        </small>
                    </p>
                </li>
            {% empty %}
                <li>No comments yet.</li>
            {% endfor %}
        </ul>
    </section>

    <section class="comment-form">
        <h3>Add a comment</h3>

        {% if user.is_authenticated %}
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Submit</button>
            </form>
        {% else %}
            <p>You must be logged in to add a comment.</p>
        {% endif %}
    </section>
{% endblock %}
