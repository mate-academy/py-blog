{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <strong>Author:</strong> {{ post.owner }} ---- {{ post.created_time }} ðŸ’¬ {{ post.commentaries.count }}<br>
  <p class="font-italic">{{ post.content}}</p>
  {% if post.commentaries.all %}
    <h5>{{ post.commentaries.count }} comment{{ post.commentaries.all|pluralize }}</h5>

    {% for comment in post.commentaries.all %}
      <div class="border border-dark">
        <strong>{{ comment.user }}</strong> {{ comment.created_time }}<br>
        {{ comment.content }}<br>
      </div>
      <br>
    {% endfor %}

  {% else %}
    <h5>0 comments</h5>
    <h6>No comments yet...</h6>
  {% endif %}

  <h5>Add a comment</h5>
    <form action="" method="post">
      {% csrf_token %}
      {{ form | crispy }}
        <input type="submit" value="Add comment" class="btn btn-success">
      {% if not user.is_authenticated %}
        <br>
        <a href="{% url 'login'%}?next={{request.path}}">Login</a>
      {% endif %}
    </form>
  <br>
{% endblock %}
