{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}

  <h1 class="bg-primary"> {{ post.title }} </h1>
  <p class="font-italic text-muted" >Published {{ post.created_time }} by {{ post.owner.username }}</p>
  <p class="text-justify"> {{ post.content }} </p>
  <h6>{{ post.comments.count }} comment{% if post.comments.count != 1 %}s{% endif %}:</h6>
  {% for comment in post.comments.all %}
    <table class="table  table-bordered">
      <tr>
        <th class="font-italic font-weight-normal">{{ comment.user.username }} ({{ comment.created_time }})</th>
      </tr>
      <tr>
        <td>{{ comment.content }}</td>
      </tr>
    </table>

  {% empty %}
    <p class="p-2">There are no comments yet</p>
  {% endfor %}

  {% if user.is_authenticated %}
    <h6>Add a new comment</h6>
    <form action="" method="post" novalidate>
      {% csrf_token %}
      {{ form|crispy }}
      <input class="btn btn-primary" type="submit" value="Add comment">
    </form>
  {% endif %}

{% endblock %}
