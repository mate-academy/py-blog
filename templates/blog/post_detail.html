{% extends "base.html" %}
{% load crispy_forms_filters %}
{% block content %}
  <div class="post small">
    <h3>{{ post.title }}</h3>
    <hr>
    <div class="autor"><strong>{{ post.owner.username }}</strong></div>
    <div class="autor">{{ post.owner.first_name }} {{ post.owner.last_name }}</div>
    <hr>
    <p>{{ post.content}}</p>
    <div class="info">
      <span class="date">{{ post.created_time }}</span>
    </div>
  <hr>
  <div class="post small">
    {% if user.is_authenticated %}
    <div class="card-body">
      <h6>Leave a comment</h6>
      <hr>
      <form method="post" style="margin-top: 1.3em;">
        {{ comment_form|crispy }}
        {% csrf_token %}
        <input type="hidden" name="user_id" value="{{ user.id }}">
        <input type="hidden" name="post_id" value="{{ post.id }}">
        <a href="{% url 'blog:post-detail' pk=post.id %}">
          <button type="submit" class="btn btn-primary btn-lg btn-block">Comment</button>
        </a>
      </form>
    </div>
  {% else %}<p style="text-align: center;">Please <a href="{% url 'login' %}">login</a> to leave comments.</p>
  {% endif %}
  </div>
  <hr>
  {% for comment in post.comments.all %}
    <br>
    <li class="list-group-item">
      <ol class="breadcrumb">
        <strong>{{ comment.user.username }}</strong>, {{ comment.created_time|date:"Y-m-d H:i" }}
      </ol>
      {{ comment.content }}
    </li>
  {% empty %}*No comments yet
  {% endfor %}
  </div>
{% endblock %}
