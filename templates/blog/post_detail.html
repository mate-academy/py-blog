{% extends "base.html" %}

{% block title %}
	<title>{{ post.title }}</title>
{% endblock %}

{% block content %}
	<h2>{{ post.title }}</h2>
  <p>Published on: {{ post.created_time }} by {{ post.owner }}</p>
  <p class="h5">{{ post.content }}</p>
  <p>{{ post.commentaries.count }} comment{{ post.commentaries.count|pluralize }}</p>
  {% if post.commentaries.count == 0 %}
  	<p>There are no comments yet</p>
  {% else %}
    {% for commentary in post.commentaries.all %}
      <div class="card shadow-sm mb-2">
        <div class="card-header">
          <p>{{ commentary.user }} {{ commentary.created_time }}</p>
        </div>
        <div class="card-body">
          <p>{{ commentary.content }}</p>
        </div>
      </div>
    {% endfor %}
  {% endif %} 
  <hr>
  
  {% if user.is_authenticated %}
    <p><strong>Add a new comment</strong></p>
    <form method="post" action="{% url 'blog:add-comment' post.id %}">
      {% csrf_token %}
      <div>
        <textarea name="comment" aria-label="Comment" class="form-control"></textarea>
      </div>
      <button type="submit" class="btn btn-success green">Add comment</button>
    </form>
  {% endif %}
{% endblock %}
