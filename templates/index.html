{% extends "base.html" %}

{% block content %}
  <h1>List of posts</h1>
  {% for post in post_list %}
    <div class="post">
      <h2>
        <a href="{% url 'blog:post-detail' post.id %}">{{ post.title }}</a>
      </h2>
      <p>{{ post.content }}</p>
      <p>Author: {{ post.author.username }}| Created: {{ post.created_time|date:"d.m.Y H:i" }}| Comments: {{ post.comments.count }}</p>
      <div class="comments">
        <h4>Comments:</h4>
        {% for comment in post.comments.all %}
          <div>
            <strong>{{ comment.user.username }}</strong>: {{ comment.content }}<br>
            <small>{{ comment.created_time|date:"d.m.Y H:i" }}</small>
            <hr style="width: 10%; margin-left: 0; margin-top: 2px;">
          </div>
        {% empty %}
          <p>No comments yet.</p>
        {% endfor %}
      </div>
      <hr>
    </div>
  {% empty %}
    <p>No posts yet.</p>
  {% endfor %}
{% endblock %}
